!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var o=e();for(var a in o)("object"==typeof exports?exports:t)[a]=o[a]}}(self,(function(){return t={849:t=>{function e(t){this.key=t.key,this.requestConfig={key:t.key,s:"rsx",platform:"WXJS",appname:t.key,sdkversion:"1.2.0",logversion:"2.0"}}e.prototype.getWxLocation=function(t,e){wx.getLocation({type:"gcj02",success:function(t){var o=t.longitude+","+t.latitude;wx.setStorage({key:"userLocation",data:o}),e(o)},fail:function(o){wx.getStorage({key:"userLocation",success:function(t){t.data&&e(t.data)}}),t.fail({errCode:"0",errMsg:o.errMsg||""})}})},e.prototype.getRegeo=function(t){function e(e){var a=o.requestConfig;wx.request({url:"https://restapi.amap.com/v3/geocode/regeo",data:{key:o.key,location:e,extensions:"all",s:a.s,platform:a.platform,appname:o.key,sdkversion:a.sdkversion,logversion:a.logversion},method:"GET",header:{"content-type":"application/json"},success:function(o){var a,r,i,s,n,c,p,u,l;o.data.status&&"1"==o.data.status?(r=(a=o.data.regeocode).addressComponent,i=[],s="",a&&a.roads[0]&&a.roads[0].name&&(s=a.roads[0].name+"附近"),n=e.split(",")[0],c=e.split(",")[1],a.pois&&a.pois[0]&&(s=a.pois[0].name+"附近",(p=a.pois[0].location)&&(n=parseFloat(p.split(",")[0]),c=parseFloat(p.split(",")[1]))),r.provice&&i.push(r.provice),r.city&&i.push(r.city),r.district&&i.push(r.district),r.streetNumber&&r.streetNumber.street&&r.streetNumber.number?(i.push(r.streetNumber.street),i.push(r.streetNumber.number)):(u="",a&&a.roads[0]&&a.roads[0].name&&(u=a.roads[0].name),i.push(u)),i=i.join(""),l=[{iconPath:t.iconPath,width:t.iconWidth,height:t.iconHeight,name:i,desc:s,longitude:n,latitude:c,id:0,regeocodeData:a}],t.success(l)):t.fail({errCode:o.data.infocode,errMsg:o.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}var o=this;t.location?e(t.location):o.getWxLocation(t,(function(t){e(t)}))},e.prototype.getWeather=function(t){function e(e){var o="base";t.type&&"forecast"==t.type&&(o="all"),wx.request({url:"https://restapi.amap.com/v3/weather/weatherInfo",data:{key:a.key,city:e,extensions:o,s:r.s,platform:r.platform,appname:a.key,sdkversion:r.sdkversion,logversion:r.logversion},method:"GET",header:{"content-type":"application/json"},success:function(e){var o,a;e.data.status&&"1"==e.data.status?e.data.lives?(o=e.data.lives)&&o.length>0&&((a=function(t){return{city:{text:"城市",data:t.city},weather:{text:"天气",data:t.weather},temperature:{text:"温度",data:t.temperature},winddirection:{text:"风向",data:t.winddirection+"风"},windpower:{text:"风力",data:t.windpower+"级"},humidity:{text:"湿度",data:t.humidity+"%"}}}(o=o[0])).liveData=o,t.success(a)):e.data.forecasts&&e.data.forecasts[0]&&t.success({forecast:e.data.forecasts[0]}):t.fail({errCode:e.data.infocode,errMsg:e.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}function o(o){wx.request({url:"https://restapi.amap.com/v3/geocode/regeo",data:{key:a.key,location:o,extensions:"all",s:r.s,platform:r.platform,appname:a.key,sdkversion:r.sdkversion,logversion:r.logversion},method:"GET",header:{"content-type":"application/json"},success:function(o){var a,r;o.data.status&&"1"==o.data.status?((r=o.data.regeocode).addressComponent?a=r.addressComponent.adcode:r.aois&&r.aois.length>0&&(a=r.aois[0].adcode),e(a)):t.fail({errCode:o.data.infocode,errMsg:o.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}var a=this,r=a.requestConfig;t.city?e(t.city):a.getWxLocation(t,(function(t){o(t)}))},e.prototype.getPoiAround=function(t){function e(e){var r={key:o.key,location:e,s:a.s,platform:a.platform,appname:o.key,sdkversion:a.sdkversion,logversion:a.logversion};t.querytypes&&(r.types=t.querytypes),t.querykeywords&&(r.keywords=t.querykeywords),wx.request({url:"https://restapi.amap.com/v3/place/around",data:r,method:"GET",header:{"content-type":"application/json"},success:function(e){var o,a,r,i;if(e.data.status&&"1"==e.data.status){if((e=e.data)&&e.pois){for(o=[],a=0;a<e.pois.length;a++)r=0==a?t.iconPathSelected:t.iconPath,o.push({latitude:parseFloat(e.pois[a].location.split(",")[1]),longitude:parseFloat(e.pois[a].location.split(",")[0]),iconPath:r,width:22,height:32,id:a,name:e.pois[a].name,address:e.pois[a].address});i={markers:o,poisData:e.pois},t.success(i)}}else t.fail({errCode:e.data.infocode,errMsg:e.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}var o=this,a=o.requestConfig;t.location?e(t.location):o.getWxLocation(t,(function(t){e(t)}))},e.prototype.getStaticmap=function(t){function e(e){r.push("location="+e),t.zoom&&r.push("zoom="+t.zoom),t.size&&r.push("size="+t.size),t.scale&&r.push("scale="+t.scale),t.markers&&r.push("markers="+t.markers),t.labels&&r.push("labels="+t.labels),t.paths&&r.push("paths="+t.paths),t.traffic&&r.push("traffic="+t.traffic);var o=i+r.join("&");t.success({url:o})}var o,a=this,r=[],i="https://restapi.amap.com/v3/staticmap?";r.push("key="+a.key),o=a.requestConfig,r.push("s="+o.s),r.push("platform="+o.platform),r.push("appname="+o.appname),r.push("sdkversion="+o.sdkversion),r.push("logversion="+o.logversion),t.location?e(t.location):a.getWxLocation(t,(function(t){e(t)}))},e.prototype.getInputtips=function(t){var e=this,o=e.requestConfig,a={key:e.key,s:o.s,platform:o.platform,appname:e.key,sdkversion:o.sdkversion,logversion:o.logversion};t.location&&(a.location=t.location),t.keywords&&(a.keywords=t.keywords),t.type&&(a.type=t.type),t.city&&(a.city=t.city),t.citylimit&&(a.citylimit=t.citylimit),wx.request({url:"https://restapi.amap.com/v3/assistant/inputtips",data:a,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.tips&&t.success({tips:e.data.tips})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},e.prototype.getDrivingRoute=function(t){var e=this,o=e.requestConfig,a={key:e.key,s:o.s,platform:o.platform,appname:e.key,sdkversion:o.sdkversion,logversion:o.logversion};t.origin&&(a.origin=t.origin),t.destination&&(a.destination=t.destination),t.strategy&&(a.strategy=t.strategy),t.waypoints&&(a.waypoints=t.waypoints),t.avoidpolygons&&(a.avoidpolygons=t.avoidpolygons),t.avoidroad&&(a.avoidroad=t.avoidroad),wx.request({url:"https://restapi.amap.com/v3/direction/driving",data:a,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.route&&t.success({paths:e.data.route.paths,taxi_cost:e.data.route.taxi_cost||""})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},e.prototype.getWalkingRoute=function(t){var e=this,o=e.requestConfig,a={key:e.key,s:o.s,platform:o.platform,appname:e.key,sdkversion:o.sdkversion,logversion:o.logversion};t.origin&&(a.origin=t.origin),t.destination&&(a.destination=t.destination),wx.request({url:"https://restapi.amap.com/v3/direction/walking",data:a,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.route&&t.success({paths:e.data.route.paths})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},e.prototype.getTransitRoute=function(t){var e=this,o=e.requestConfig,a={key:e.key,s:o.s,platform:o.platform,appname:e.key,sdkversion:o.sdkversion,logversion:o.logversion};t.origin&&(a.origin=t.origin),t.destination&&(a.destination=t.destination),t.strategy&&(a.strategy=t.strategy),t.city&&(a.city=t.city),t.cityd&&(a.cityd=t.cityd),wx.request({url:"https://restapi.amap.com/v3/direction/transit/integrated",data:a,method:"GET",header:{"content-type":"application/json"},success:function(e){if(e&&e.data&&e.data.route){var o=e.data.route;t.success({distance:o.distance||"",taxi_cost:o.taxi_cost||"",transits:o.transits})}},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},e.prototype.getRidingRoute=function(t){var e=this,o=e.requestConfig,a={key:e.key,s:o.s,platform:o.platform,appname:e.key,sdkversion:o.sdkversion,logversion:o.logversion};t.origin&&(a.origin=t.origin),t.destination&&(a.destination=t.destination),wx.request({url:"https://restapi.amap.com/v4/direction/bicycling",data:a,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.data&&t.success({paths:e.data.data.paths})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},t.exports.AMapWX=e},241:(t,e,o)=>{var a=["regeocodeData"];function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,a)}return o}function s(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?i(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function n(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function c(t,e){for(var o=0;o<e.length;o++){var a=e[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function p(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,d(t,e,"get"))}function u(t,e,o){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return o}function l(t,e,o){return function(t,e,o){if(e.set)e.set.call(t,o);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=o}}(t,d(t,e,"set"),o),o}function d(t,e,o){if(!e.has(t))throw new TypeError("attempted to "+o+" private field on non-instance");return e.get(t)}var f=o(849),y=new WeakMap,h=new WeakMap,g=new WeakMap,v=new WeakMap,m=new WeakMap,k=new WeakSet,w=new WeakSet,b=new WeakSet,x=new WeakSet,M=new WeakSet,j=new WeakSet,C=new WeakSet,_=new WeakSet,O=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),_.add(this),C.add(this),j.add(this),M.add(this),x.add(this),b.add(this),w.add(this),k.add(this),y.set(this,{writable:!0,value:{_PVUV_AMAP_INFO_KEY:"_PVUV_AMAP_INFO_KEY",_PVUV_MACHINE_ID:"_PVUV_MACHINE_ID"}}),h.set(this,{writable:!0,value:null}),g.set(this,{writable:!0,value:""}),v.set(this,{writable:!0,value:""}),m.set(this,{writable:!0,value:""}),l(this,m,e.mapKey),l(this,v,e.systemId),l(this,g,e.url)}var e,o;return e=t,(o=[{key:"setSystemId",value:function(t){l(this,v,t)}},{key:"sendLogMonitor_pvuv",value:function(t,e,o){var a=this;if(0===t||t){var r=null!=o?o:{};u(this,_,A).call(this,r).then((function(o){u(a,M,W).call(a,t,e,o)})).catch((function(o){u(a,M,W).call(a,t,e,r)}))}}}])&&c(e.prototype,o),t}();function P(){try{var t=getCurrentPages()||[],e=t.length;return e>0?{url:t[e-1].route,referer:e>1?t[e-2].route:""}:{}}catch(t){console.log("error: ",t)}}function S(t,e){var o,a,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(e=e||r.length,t)for(o=0;o<t;o++)i[o]=r[0|Math.random()*e];else for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",o=0;o<36;o++)i[o]||(a=0|16*Math.random(),i[o]=r[19==o?3&a|8:a]);return i.join("")}function q(){var t=u(this,w,S).call(this,16,16);try{var e=u(this,j,I).call(this,p(this,y)._PVUV_MACHINE_ID);if(e)return e;u(this,C,D).call(this,p(this,y)._PVUV_MACHINE_ID,t)}catch(t){console.log("pvuv error: ",t)}return t}function E(t){var e={},o=u(this,k,P).call(this)||{},a=s(s({},t),o),i=["monitorPoint","userId","systemId","pvuvMachineId","expire_t","t","url","referer"],n={name:"formattedAddress",latitude:"lat",longitude:"lng"};Object.keys(a).forEach((function(t){i.includes(t)?e[t]=a[t]:e["param_".concat(n[t]||t)]="object"===r(a[t])?JSON.stringify(a[t]):a[t]})),wx.request({url:p(this,g),method:"get",data:e,success:function(t){console.log("pvuv request success: ",t)},fail:function(t){console.log("pvuv request fail: ",t)}})}function W(t,e,o){var a=u(this,b,q).call(this),r=s({monitorPoint:t,userId:e,systemId:p(this,v),pvuvMachineId:a,t:+new Date},o);u(this,x,E).call(this,r)}function I(t){return wx.getStorageSync(t)}function D(t,e){wx.setStorageSync(t,e)}function A(t){var e=this,o=null,r=!0,i=p(this,y)._PVUV_AMAP_INFO_KEY;if(o=u(this,j,I).call(this,i)){var n=o.expire_t;+new Date<n&&(r=!1)}return p(this,h)||l(this,h,new f.AMapWX({key:p(this,m)})),new Promise((function(n,c){if(r)p(e,h).getRegeo({success:function(r){var c=r[0],p=c.regeocodeData,l=function(t,e){if(null==t)return{};var o,a,r=function(t,e){if(null==t)return{};var o,a,r={},i=Object.keys(t);for(a=0;a<i.length;a++)o=i[a],e.indexOf(o)>=0||(r[o]=t[o]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)o=i[a],e.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}(c,a);o=s(s(s({},l),p.addressComponent),{},{expire_t:+new Date(1*new Date+72e5)});var d=s(s({},t),o);u(e,C,D).call(e,i,o),n(d)},fail:function(e){c(s(s({},t),{location_fail:!0,message:e}))}});else{var l=s(s({},t),o);n(l)}}))}t.exports=O,t.exports.default=O}},e={},function o(a){var r=e[a];if(void 0!==r)return r.exports;var i=e[a]={exports:{}};return t[a](i,i.exports,o),i.exports}(241);var t,e}));